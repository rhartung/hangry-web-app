{% extends 'base.html' %}
{% block content %}

{% if restaurant_list %}
  <div class="row">
    <div class="col-xs-12" align="center">
      <div class="search-greeting">
        <h1>Get ready to eat, {{ user.username }}</h1>

        <h3>You searched for {{ search_term }}, here are your results</h3>
      </div
    </div>
  </div>

  <div class="row">
    <div class="col-xs-6" align="center">
      <div class="restaurant-list">
        <h5>Click a restaurant name to display more information</h5>
        <h5>Click a restaurant's menu button for the menu</h5>

          {% for name, yelp_rating in restaurant_list %}
            <a href="#" class="restaurant" id="{{ name }}">{{ name }}</a><br>

            Rating

            {% if yelp_rating == 1 %}
              <img src="/static/yelp_stars/web_and_ios/small/small_1.png">
            {% elif yelp_rating == 1.5 %}
              <img src="/static/yelp_stars/web_and_ios/small/small_1_half.png">
            {% elif yelp_rating == 2 %}
              <img src="/static/yelp_stars/web_and_ios/small/small_2.png">
            {% elif yelp_rating == 2.5 %}
              <img src="/static/yelp_stars/web_and_ios/small/small_2_half.png">
            {% elif yelp_rating == 3 %}
              <img src="/static/yelp_stars/web_and_ios/small/small_3.png">
            {% elif yelp_rating == 3.5 %}
              <img src="/static/yelp_stars/web_and_ios/small/small_3_half.png">
            {% elif yelp_rating == 4 %}
              <img src="/static/yelp_stars/web_and_ios/small/small_4.png">
            {% elif yelp_rating == 4.5 %}
              <img src="/static/yelp_stars/web_and_ios/small/small_4_half.png">
            {% elif yelp_rating == 5 %}
              <img src="/static/yelp_stars/web_and_ios/small/small_5.png">
            {% endif %}

            <br><button class="menu-button btn btn-info" value="{{ name }}">Menu
            </button>
            <br><br>

          {% endfor %}

          <p>Search results and ratings powered by EatStreet and Yelp</p>

          <img src="/static/yelp_logo/Screen/Yelp_trademark_RGB_outline.png"
          style="height: 75px">
          <img src="/static/eatstreetvertical.png" style="height: 75px">
          <br>
        <br>
      </div><br>

        <form class="form-inline" action="/search-results" method="get">
          <div class="form-group">
            <label for="search-again">Search Again: </label>
            <input type="text" class="form-control" id="search-again" name="search">
          </div>
          <input type="submit" class="btn btn-info" value="Let's try again">
        </form>

    </div>

    <div class="col-sm-6" align="center">
      <div class="show-more hidden">
        <div id="order-info" class="hidden"></div>
        <div id="reviews" class="hidden"></div>
        <div id="photos" class="hidden"></div>
        <div id="menu" class="hidden"></div>

        {% raw %}

        <script id="menu-template" type="text/x-handlebars-template">

          <h2>{{menuName}} Menu</h2>
          <img src="{{logoUrl}}" height="75px">
          {{#each menu}}
            <h4>{{name}}</h4>
               
              {{#each items}}
                <p>{{name}}: {{description}} ${{basePrice}}
                </p>
              {{/each}}
          {{/each}}

          <br><button id="hide-menu" class="btn btn-info">Hide Menu</button><br>

        </script>

        {% endraw %}
      </div>

    </div>

  </div>


{% else %}
<div class="no-results">
  <div align="center">
    <h1>OMG, {{ user.username }}, no restaurants found for
      {{ search_term }}.</h1>
    <h3>That's sad.</h3><br>

      <form action="/search-results" method="get">
        <div class="form-group">
          <label for="re-search">Search Again </label>
          <input type="text" id="re-search" class="form-control" name="search">
        </div>
          <input type="submit" class="btn btn-info" value="Let's try again">
      </form><br>

      <form action="/search-results" method="get">
        <div class="form-group">
          <label for="pick-new">Try one of these common search terms </label>
          <select id="pick-new" class="form-control" name="search">
            {% for cuisine in cuisines %}
            <option value={{ cuisine }}>{{ cuisine }}</option>
            {% endfor %}
          </select>
        </div>
        <input type="submit" class="btn btn-info" value="I just wanna eat!"><br><br>
      </form>
  </div>
</div>
{% endif %}


{% endblock %}

{% block scripts %}

  <script src="/static/more_info.js"></script>
  <script src="/static/menu.js"></script>

{% endblock %}